<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Anime Info Display</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <h1>Anime Info Display</h1>
    <form class="search-bar" action="/" method="POST">
        <input type="text" name="query" placeholder="Enter anime name">
        <button type="submit">Search</button>
    </form>
    <% if (typeof error !== 'undefined' && error) { %>
        <div class="error-message">
            <strong><%= error %></strong>
        </div>
    <% } %>
    <% if (typeof results !== 'undefined' && results && results.length > 0) { %>
        <div class="results-list">
            <% results.forEach(function(anime) { %>
                <div class="result-card">
                    <div class="result-image">
                        <img src="<%= anime.images?.jpg?.image_url || 'https://via.placeholder.com/100x140?text=No+Image' %>" alt="<%= anime.title %>" width="100">
                    </div>
                    <div class="result-info">
                        <div class="result-title">
                            <h3><%= anime.title %></h3>
                        </div>
                        <div class="result-year">
                            <%= anime.year || '' %>
                        </div>
                        <form action="/anime/<%= anime.mal_id %>" method="get">
                            <button type="submit">View Details</button>
                        </form>
                    </div>
                </div>
            <% }); %>
        </div>
    <% } %>
    <% if (typeof anime !== 'undefined' && anime) { %>
    <div class="anime-card">
        <div class="image">
            <img src="<%= anime.images?.jpg?.image_url || 'https://via.placeholder.com/200x280?text=No+Image' %>" alt="Anime Image" width="200">
        </div>
        <div class="info">
            <div class="title">
                <h2><%= anime.title %></h2>
            </div>
            <div class="episodes">
                <strong>Episodes:</strong> <%= anime.episodes %>
            </div>
            <div class="status">
                <strong>Status:</strong> <%= anime.status %>
            </div>
            <div class="score">
                <strong>Score:</strong> <%= anime.score %>
            </div>
            <div class="synopsis">
                <strong>Synopsis:</strong>
                <p><%= anime.synopsis %></p>
            </div>
            <div class="link">
                <a href="<%= anime.url %>" target="_blank">View on MyAnimeList</a>
            </div>
            <div class="wishlist-button">
                <form action="/watchlist" method="POST">
                    <button>Add to Wishlist</button>
                    <input type="hidden" name="id" value="<%=anime.mal_id%>">
                </form>
                
            </div>
        </div>
    </div>
    <% } %>
</body>
</html>
